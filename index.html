<script src='https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js'></script>
<script src='https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js'></script>
<script src="main.js"></script>
<!-- I see that you are looking at the code to try and figure out the cypher. Well this is just the
beginning. It will get tougher soon if it isnt touch already! :)  -->


<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }

  .center {
    margin: auto;
    width: 60%;
    border: 3px solid #73AD21;
    padding: 10px;
    }

    .form {
      opacity: 0.7;
      font-size: 25px;
      padding: 0.3em;
      border-radius: 4px;
      transform: scale(2); 
      text-align: center;
      align-content: center;
      border: none;
      -webkit-appearance: none;
    }

    .form-div {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 12em;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }

    .button {
      background-color: #4475cfb6; 
      border: none;
      color: white;
      padding: 10px 25px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
    }

</style>

<!-- rawgithack development URL -->
<script>
  AFRAME.registerComponent('markerhandlerone', {
  init: function () {
      var Marker = this.el; 

      Marker.addEventListener('markerFound', function() {
          let at = document.getElementById("im1"); 
          let cypher = at.getAttribute("value");  
          console.log(cypher); 
          update(cypher, "im1"); 
      }); 
  }

  
})

AFRAME.registerComponent('markerhandlertwo', {
  init: function () {
      var Marker = this.el; 

      Marker.addEventListener('markerFound', function() {
          let at = document.getElementById("im2"); 
          let cypher = at.getAttribute("value");  
          console.log(cypher); 
          update(cypher, "im2"); 
      }); 
  }
})

AFRAME.registerComponent('markerhandlerthree', {
  init: function () {
      var Marker = this.el; 

      Marker.addEventListener('markerFound', function() {
          let at = document.getElementById("im3"); 
          let cypher = at.getAttribute("value");  
          console.log(cypher); 
          update(cypher, "im3"); 
      }); 
  }
})

AFRAME.registerComponent('markerhandlerfour', {
  init: function () {
      var Marker = this.el; 

      Marker.addEventListener('markerFound', function() {
          let at = document.getElementById("im4"); 
          let cypher = at.getAttribute("value");  
          console.log(cypher); 
          update(cypher, "im4"); 
      }); 
  }
})

AFRAME.registerComponent('markerhandlerfive', {
  init: function () {
      var Marker = this.el; 

      Marker.addEventListener('markerFound', function() {
          let at = document.getElementById("im5"); 
          let cypher = at.getAttribute("value");  
          console.log(cypher); 
          update(cypher, "im5"); 
      }); 
  }
})

AFRAME.registerComponent('markerhandlertest', {
  init: function () {
      this.eid = "test"; 
      this.cypher = document.getElementById("test").getAttribute("cypher");
      console.log(cypher); 
    
      this.el.addEventListener('markerFound', function() {
          
          let inputVar = document.getElementById("secret").value; // key

          if(inputVar!="" || inputVar != null){
            let cleanInput = inputVar.replace(/\s+/g, ''); //cleanKey
            let decode = cypher(document.getElementById("test").getAttribute("value"), cleanInput, true); //decode
            let encodeTest = cypher(decode, cleanInput); 

            if(encodeTest == this.cypher){
              this.atext.setAttribute("value", decode); 
              this.atext.setAttribute("color", "green")
            }else{
              this.atext.setAttribute("value", this.cypher); 
              this.atext.setAttribute("color", "red"); 
            }
          }
      }); 

      this.el.addEventListener('markerLost', function() {
         
        document.getElementById("test").setAttribute("value", this.cypher); 
        document.getElementById("test").setAttribute("color", "red"); 
        
         
      }); 
  }
})
</script>



<body style='margin : 0px; overflow: hidden;'>
    
    <div class="arjs-loader">
        <div>Loading, please wait...</div>
        
    </div>

    <div class="form-div">
      <form class="form">
        <input type="text" id="secret" name="secret" placeholder="input secret here"><br>
        <!--<input class='button' type='button' onclick="decrypt()" value="Decrypt"></input>-->
      </form> 
    </div>

    

    <a-scene
        vr-mode-ui='enabled: false;'
        renderer="logarithmicDepthBuffer: true;"
        embedded arjs='trackingMethod: best; sourceType: webcam; debugUIEnabled: false;'>

      <a-nft
      markerhandlertest
      type='nft' 
      url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/thehackreality/AR-ScavengerHunt/master/assets/one/one'
      smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'>

      <a-text 
        id="test" 
        cypher="AQRIROITGWRBNWSUFLE"
        value="AQRIROITGWRBNWSUFLE" 
        color="red" 
        rotation="-90 0 0" 
        scale="40 40 40" 
        text="anchor: center; zOffset: -2; wrapCount: 15; align: center; height: 50; lineHeight: 50; xOffset: 3" 
        position="">
      </a-text>

      </a-nft>
       <!--
      <a-nft
      markerhandlerone
      type='nft'
      url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/thehackreality/AR-ScavengerHunt/master/assets/one/one'
      smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'>

        <a-text 
          id="im1" 
          value="MOISZEFWCATONAMLREXNKTMZMYDBMOEKHFKJREWQLTGKELKITFJBZKKYBZX" 
          color="red" 
          rotation="-90 0 0" 
          scale="40 40 40" 
          text="anchor: center; zOffset: -2; wrapCount: 15; align: center; height: 50; lineHeight: 50; xOffset: 3" 
          position="">
        </a-text>

      </a-nft>
        
        <a-nft
            markerhandlertwo type='nft' url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/thehackreality/AR-ScavengerHunt/master/assets/two/two'
            smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'>

          <a-text 
            id="im2" 
            value="XURLUKENCVWOAQEGPZVAUVDFILGUKVTGDPEDOVIGNHEBHMYBCK" 
            color="red" 
            rotation="-90 0 0"  
            scale="40 40 40"
            text="anchor: center; zOffset: -2; wrapCount: 15; align: center; height: 50; lineHeight: 50; xOffset: 3" 
            position="">
          </a-text>

    
        </a-nft>

        <a-nft
          markerhandlerthree type='nft' url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/thehackreality/AR-ScavengerHunt/master/assets/three/three'
            smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'>
            
          <a-text 
            id="im3" 
            value="EPKRXWXOKSMZOXDYTLCMAUEMGKJLZUBGBXASWM" 
            color="red" 
            rotation="-90 0 0"  
            scale="40 40 40"
            text="anchor: center; zOffset: -2; wrapCount: 15; align: center; height: 50; lineHeight: 50; xOffset: 3" 
            position="">
          </a-text>

        </a-nft>

        <a-nft
          markerhandlerfour type='nft' url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/thehackreality/AR-ScavengerHunt/master/assets/four/four'
            smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'>
            
        
          <a-text 
            id="im4" 
            value="HHWUGGTXIECUKJSPY" 
            color="red" 
            rotation="-90 0 0"  
            scale="40 40 40"
            text="anchor: center; zOffset: -2; wrapCount: 15; align: center; height: 50; lineHeight: 50; xOffset: 3" 
            position="">
          </a-text>

        </a-nft>

        <a-nft
          markerhandlerfive type='nft' url='https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/thehackreality/AR-ScavengerHunt/master/assets/five/five'
            smooth='true' smoothCount='10' smoothTolerance='0.01' smoothThreshold='5'>
           
          
          <a-text 
            id="im5" 
            value="UWQIFLMXKSGLMZQJURUWTIPTMVFSZI" 
            color="red" 
            rotation="-90 0 0"  
            scale="40 40 40"
            text="anchor: center; zOffset: -2; wrapCount: 15; align: center; height: 50; lineHeight: 50; xOffset: 3" 
            position="">
        </a-text>
       
       
          </a-nft>
        -->
        
		<a-entity camera></a-entity>
    </a-scene>

    
</body>